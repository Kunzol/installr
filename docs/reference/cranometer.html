<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Measures the speed of downloading from different CRAN mirrors — cranometer • installr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Measures the speed of downloading from different CRAN mirrors — cranometer" />
<meta property="og:description" content="Estimates the speed of each CRAN mirror by measuring the time it takes to download the NEWS file." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">installr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.23.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/talgalili/installr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Measures the speed of downloading from different CRAN mirrors</h1>
    <small class="dont-index">Source: <a href='https://github.com/talgalili/installr/blob/master/R/geo_functions.R'><code>R/geo_functions.R</code></a></small>
    <div class="hidden name"><code>cranometer.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Estimates the speed of each CRAN mirror by measuring the time it takes to download the NEWS file.</p>
    </div>

    <pre class="usage"><span class='fu'>cranometer</span><span class='op'>(</span>ms <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/utils/chooseCRANmirror.html'>getCRANmirrors</a></span><span class='op'>(</span>all <span class='op'>=</span> <span class='cn'>FALSE</span>, local.only <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>ms</th>
      <td><p>- the output of getCRANmirrors.  Defaults to using all of the mirrors.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>not in use</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a data.frame with details on mirror sites and the time it took to download their NEWS file.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>It works by downloading the latest NEWS file (288 Kbytes at the moment, so not huge) 
from each of the mirror sites in the CRAN mirrors list. 
If you want to test it on a subset then call getCRANmirrors yourself and subset it somehow.</p>
<p>It runs on the full CRAN list and while designing this package I've yet to find a 
timeout or error so I'm not sure what will happen if download.file
fails. It returns a data frame like you get from getCRANmirrors but
with an extra 't' column giving the elapsed time to get the NEWS file.</p>
<p>CAVEATS: if your network has any local caching then these results
will be wrong, since your computer will probably be getting the
locally cached NEWS file and not the one on the server. Especially if
you run it twice. Oh, I should have put cacheOK=FALSE in the
download.file - but even that might get overruled somewhere. Also,
sites may have good days and bad days, good minutes and bad minutes,
your network may be congested on a short-term basis, etc etc.</p>
<p>There may also be a difference in reliability, which would not so easily be measured by an individual user.</p>
<p>Later that year, Barry also wrote Cranography. See: <a href='https://www.maths.lancs.ac.uk/~rowlings/R/Cranography/'>https://www.maths.lancs.ac.uk/~rowlings/R/Cranography/</a>.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><a href='freegeoip.html'>freegeoip</a>, <a href='myip.html'>myip</a>, cranometer</p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Barry Rowlingson &lt;b.rowlingson@lancaster.ac.uk&gt;</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'># this can take some time</span>
<span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'>cranometer</span><span class='op'>(</span><span class='op'>)</span> 

<span class='va'>time_order</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/order.html'>order</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>$</span><span class='va'>t</span><span class='op'>)</span>

<span class='co'># a quick overview of the fastest mirrors</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>[</span><span class='va'>time_order</span>,<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>4</span>, <span class='fl'>9</span><span class='op'>)</span><span class='op'>]</span>, <span class='fl'>20</span><span class='op'>)</span>

<span class='co'># a dotchart of the fastest mirrors</span>
<span class='fu'><a href='https://rdrr.io/r/base/with.html'>with</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/rev.html'>rev</a></span><span class='op'>(</span><span class='va'>time_order</span><span class='op'>)</span>,<span class='op'>]</span>,
 <span class='fu'><a href='https://rdrr.io/r/graphics/dotchart.html'>dotchart</a></span><span class='op'>(</span><span class='va'>t</span>, labels <span class='op'>=</span><span class='va'>Name</span>,
 cex <span class='op'>=</span> <span class='fl'>.5</span>, xlab <span class='op'>=</span> <span class='st'>"Timing of CRAN mirror"</span><span class='op'>)</span>
 <span class='op'>)</span>

<span class='co'># tail(geonames_df)</span>
<span class='co'># tail(x)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='http://had.co.nz/plyr'>plyr</a></span><span class='op'>)</span>
<span class='va'>ss</span> <span class='op'>&lt;-</span> <span class='op'>!</span><span class='op'>(</span><span class='va'>x</span><span class='op'>$</span><span class='va'>Name</span> <span class='op'>==</span> <span class='st'>"0-Cloud"</span><span class='op'>)</span>
<span class='va'>gvis_df</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/plyr/man/ddply.html'>ddply</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>[</span><span class='va'>ss</span>,<span class='op'>]</span>, <span class='fu'><a href='https://rdrr.io/pkg/plyr/man/quoted.html'>.</a></span><span class='op'>(</span><span class='va'>CountryCode</span><span class='op'>)</span>, <span class='kw'>function</span><span class='op'>(</span><span class='va'>xx</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='va'>ss</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/which.min.html'>which.min</a></span><span class='op'>(</span><span class='va'>xx</span><span class='op'>$</span><span class='va'>t</span><span class='op'>)</span> 
  <span class='kw'>if</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>ss</span><span class='op'>)</span> <span class='op'>==</span> <span class='fl'>0</span><span class='op'>)</span> <span class='va'>ss</span> <span class='op'>&lt;-</span> <span class='fl'>1</span>
  <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>time <span class='op'>=</span> <span class='va'>xx</span><span class='op'>$</span><span class='va'>t</span><span class='op'>[</span><span class='va'>ss</span><span class='op'>]</span>, name <span class='op'>=</span> <span class='va'>xx</span><span class='op'>$</span><span class='va'>Name</span><span class='op'>[</span><span class='va'>ss</span><span class='op'>]</span> <span class='op'>)</span>
<span class='op'>}</span><span class='op'>)</span>
<span class='va'>gvis_df</span> <span class='op'>&lt;-</span> <span class='va'>gvis_df</span><span class='op'>[</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>gvis_df</span><span class='op'>$</span><span class='va'>time</span><span class='op'>)</span>, <span class='op'>]</span>

<span class='fu'><a href='require2.html'>require2</a></span><span class='op'>(</span><span class='st'>"googleVis"</span><span class='op'>)</span>
<span class='va'>Geo</span><span class='op'>&lt;-</span><span class='fu'>gvisGeoMap</span><span class='op'>(</span><span class='va'>gvis_df</span>,
              locationvar <span class='op'>=</span> <span class='st'>"CountryCode"</span>,
               numvar<span class='op'>=</span><span class='st'>"time"</span>,
               hovervar <span class='op'>=</span> <span class='st'>"name"</span>,
               options<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
                            colors<span class='op'>=</span><span class='st'>'[0xA5EF63, 
                             0xFFB581, 0xFF8747]'</span><span class='op'>)</span>
              <span class='op'>)</span>
<span class='co'># Display chart</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.html'>plot</a></span><span class='op'>(</span><span class='va'>Geo</span><span class='op'>)</span> 
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Tal Galili.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


